_HTTP_IPDB_SRCS="\
    $ngx_addon_dir/ngx_http_ipdb_module.c \
    $ngx_addon_dir/ipdb/ipdb.c \
"
_HTTP_JSON_LIB="-ljson-c"

ngx_feature="json-c library"
ngx_feature_name="NGX_JSON_C"
ngx_feature_run=no
ngx_feature_incs="#include <json-c/json.h>"
ngx_feature_path=
ngx_feature_libs="$_HTTP_JSON_LIB"
ngx_feature_test="json_c_version_num()"
. auto/feature

if [ $ngx_found = yes ]; then
    ngx_addon_name=ngx_http_ipdb_module
    HTTP_MODULES="$HTTP_MODULES ngx_http_ipdb_module"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $_HTTP_IPDB_SRCS"
    CORE_LIBS="$CORE_LIBS $_HTTP_JSON_LIB"
    HTTP_INCS="$HTTP_INCS $ngx_addon_dir"
else
    echo "warning: ngx_http_ipdb_module invalid. please yum install json-c"
fi
